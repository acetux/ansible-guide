==========
ROLE REDIS
==========

.. image:: https://img.shields.io/github/license/adfinis-sygroup/ansible-role-redis.svg?style=flat-square
  :target: https://github.com/adfinis-sygroup/ansible-role-redis/blob/master/LICENSE

.. image:: https://img.shields.io/travis/adfinis-sygroup/ansible-role-redis.svg?style=flat-square
  :target: https://travis-ci.org/adfinis-sygroup/ansible-role-redis

.. image:: https://img.shields.io/badge/galaxy-adfinis--sygroup.redis-660198.svg?style=flat-square
  :target: https://galaxy.ansible.com/adfinis-sygroup/redis

This role installs Redis, an in-memory data store.


Requirements
=============

none to date


Role Variables
===============

* redis_packages: redis installation package
* redis_service: service name
* redis_port: service port
* redis_interface: bind interface for redis connections
* redis_interface_fact_var: ansible fact variable for the redis_interface
* redis_bind: list of redis bind ip addresses separated by spaces
* redis_pidfile: absolute path to pid file
* redis_log_level: log level, any of debug, verbose, notice, warning
* redis_logfile: absolute path to log file, empty string to log to stdout
* redis_password: brute-force safe password, < 512 chars
* redis_slave_of: replication master ip
* redis_slave_of_port: change port connection to master node
* redis_save_thresholds: list of snapshotting thresholds
* redis_db_dir: db will be written inside this directory
* redis_db_filename: filename of db dump
* redis_config_file: absolute path to the redis config file

Dependencies
=============

none to date


Example Playbook
=================

.. code-block:: yaml

  - hosts: servers
    roles:
       - { role: adfinis-sygroup.redis }


License
========

`GPL-3.0 <https://github.com/adfinis-sygroup/ansible-role-redis/blob/master/LICENSE>`_


Author Information
===================

redis role was written by:

* Adfinis SyGroup AG | `Website <https://www.adfinis-sygroup.ch/>`_ | `Twitter <https://twitter.com/adfinissygroup>`_ | `GitHub <https://github.com/adfinis-sygroup>`_


Default values
==============

   
   redis_packages:
     - redis
   
service name

.. code-block:: YAML

   redis_service: redis
   
user owner for files

.. code-block:: YAML

   redis_owner: redis
group owner for files

.. code-block:: YAML

   redis_group: redis
   
service port

.. code-block:: YAML

   redis_port: 6379
   
bind interface for redis connections

.. code-block:: YAML

   redis_interface: eth0
   redis_interface_fact_var: ansible_{{ redis_interface }}
bind on external ip of the redis bind interface and on localhost;
this variable can be used to define a custom (space separated) list
of ip addresses, for instance, to amend a virtual ip

.. code-block:: YAML

   redis_bind: '{{ hostvars[inventory_hostname][redis_interface_fact_var]["ipv4"]["address"] }} 127.0.0.1'
   
pid file

.. code-block:: YAML

   redis_pidfile: '/var/run/redis_{{ redis_port }}.pid'
   
log level, any of debug, verbose, notice, warning

.. code-block:: YAML

   redis_log_level: 'notice'
log file, empty string to log to stdout

.. code-block:: YAML

   redis_logfile: '/var/log/redis/redis.log'
   
brute-force safe password, < 512 chars
if set, used for client authentication and replication
redis_password: uho9ju8quaireethoojag3oopoorohs4ka0eeK5aiyoo4ahr9gaiP9teegiepi1f
master ip
if set, this instance will be slave,
otherwise, it assumes to be master
redis_slave_of: 127.0.0.1
slaveof port
if the master redis node runs on a non-standard port, one can change it here
redis_slave_of_port: 6379
enable snapshotting by uncommenting desired entries, for instance
 - after 900 sec (15 min) if at least 1 key changed
 - after 300 sec (5 min) if at least 10 keys changed
 - after 60 sec if at least 10000 keys changed
redis_save_thresholds:
  - 900 1
  - 300 10
  - 60 10000
db will be written inside this directory

.. code-block:: YAML

   redis_db_dir: '/var/lib/redis'
filename of db dump

.. code-block:: YAML

   redis_db_filename: 'dump.rdb'
   
location of redis config file

.. code-block:: YAML

   redis_config_file: '/etc/redis.conf'